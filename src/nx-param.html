<link rel="import" href="../bower_components/polymer/polymer.html">

<dom-module id="nx-param">
  <template>
    <app-location route="{{route}}"></app-location>
  </template>
  <script>
    (function() {
      'use strict';
      class NxParam {

        get observers() {
          return [
            '_getParam(route)'
          ];
        }

        beforeRegister() {
          this.is = 'nx-param';
          this.properties = {
            pattern:{
              type:String
            },
            params:{
              type:Object,
              notify:true
            }
          };
        }

        _getParam(){
          var path = this.route.path;
          var params = path.split("/");

          var pattern = this.pattern;
          if(pattern){
            var getVar = pattern.split("/");
          }

          var getPrarams = {
            app:params[1],
            page:params[2]
          };

          if(getVar){
            getVar.map(function(obj,index){
              getPrarams[obj] = params[index+3];
            });
          }

          this.params = getPrarams;
        }

      }
      Polymer(NxParam);

    })();


  </script>
</dom-module>
